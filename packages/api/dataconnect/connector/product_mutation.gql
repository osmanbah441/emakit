mutation createNewProduct(
    $name: String! 
    $description: String!
    $category: UUID!
    $specs: Any!
    $storeId: UUID!,
    $attributes: Any!,
    $imageUrls: [String!]!,
    $price: Float!,
    $availableStock: Int!
    $embeddingText: String!
)@transaction @auth(level: USER) {
    product_insert(data:  {
        name: $name
        description: $description
        categoryId: $category
        specifications: $specs
        embeddingText_embed:  {
            model: "gemini-embedding-001"
            text: $embeddingText
        }
    })

    productVariation_insert(data: {
        productId_expr: "response.product_insert.id",
        storeId: $storeId,
        attributes: $attributes,
        imageUrls: $imageUrls,
        price: $price,
        availableStock: $availableStock
    }) 
}

mutation createNewproductVariation(
    $productId: UUID!,
    $storeId: UUID!,
    $attributes: Any!,
    $imageUrls: [String!]!,
    $price: Float!,
    $availableStock: Int!
) @auth(level: USER){
    productVariation_insert(data:  {
        productId: $productId
        storeId: $storeId
        attributes: $attributes
        imageUrls: $imageUrls
        price: $price
        availableStock: $availableStock
    })
}